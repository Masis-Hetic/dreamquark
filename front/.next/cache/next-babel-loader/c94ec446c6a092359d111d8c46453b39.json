{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/masis/Documents/dreamquark/dreamquark/front/pages/new-user.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport NewUser from \"../components/pages/add-user/add-user.styles\";\nimport MainComponent from \"../components/main-component/main-component\";\nimport Router from 'next/router';\n\nvar newUser =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(newUser, _React$Component);\n\n  function newUser() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, newUser);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(newUser)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      teams: [],\n      orga: '',\n      user: {\n        name: '',\n        email: '',\n        teams_id: [],\n        organization_id: 1\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeTeams\", function (e) {\n      e.persist();\n\n      if (_this.state.teams.includes(e.target.value)) {\n        var teamsArray = _this.state.teams.filter(function (r) {\n          return r !== e.target.value;\n        });\n\n        _this.setState({\n          teams: teamsArray.map(Number)\n        });\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            teams: [].concat(_toConsumableArray(prevState.teams), [e.target.value])\n          };\n        }, function () {\n          return _this.setState(function (prevState) {\n            return {\n              user: _objectSpread({}, prevState.user, {\n                teams_id: _this.state.teams.map(Number)\n              })\n            };\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeOrga\", function (e) {\n      _this.setState({\n        orga: Number(e.target.value)\n      }, function () {\n        return _this.setState(function (prevState) {\n          return {\n            user: _objectSpread({}, prevState.user, {\n              organization_id: Number(_this.state.orga)\n            })\n          };\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleName\", function (e) {\n      e.persist();\n\n      _this.setState(function (prevState) {\n        return {\n          user: _objectSpread({}, prevState.user, {\n            name: e.target && e.target.value\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEmail\", function (e) {\n      e.persist();\n\n      _this.setState(function (prevState) {\n        return {\n          user: _objectSpread({}, prevState.user, {\n            email: e.target && e.target.value\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleForm\", function (e) {\n      e.preventDefault();\n      var data = _this.state.user;\n      fetch('http://localhost:8080/api/new-user', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify(data)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        response.message;\n        Router.push('/');\n      })[\"catch\"](function (error) {\n        return console.error('Error:', error);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(newUser, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          teams = _this$state.teams,\n          user = _this$state.user;\n      var _this$props = this.props,\n          getTeams = _this$props.getTeams,\n          getOrgas = _this$props.getOrgas,\n          asPath = _this$props.asPath;\n      return __jsx(MainComponent, {\n        asPath: asPath,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, __jsx(NewUser, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __jsx(NewUser.H1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Add new user\"), __jsx(NewUser.Form, {\n        onSubmit: this.handleForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, __jsx(NewUser.Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, __jsx(NewUser.Label, {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Name\"), __jsx(NewUser.Input, {\n        id: \"name\",\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nom de l'utilisateur\",\n        value: user.name,\n        onChange: function onChange(e) {\n          return _this2.handleName(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), __jsx(NewUser.Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, __jsx(NewUser.Label, {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"E-mail\"), __jsx(NewUser.Input, {\n        id: \"email\",\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email de l'utilisateur\",\n        value: user.email,\n        onChange: function onChange(e) {\n          return _this2.handleEmail(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), __jsx(NewUser.Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, __jsx(NewUser.Label, {\n        htmlFor: \"teams\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Choisir une ou plusieurs teams\"), __jsx(NewUser.Select, {\n        name: \"teams\",\n        id: \"teams\",\n        multiple: true,\n        value: teams,\n        onChange: this.handleChangeTeams,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, getTeams.map(function (team, i) {\n        return __jsx(\"option\", {\n          key: i,\n          value: team.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, team.name);\n      }))), __jsx(NewUser.Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, __jsx(NewUser.Label, {\n        htmlFor: \"organization\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Organisation\"), __jsx(NewUser.Select, {\n        name: \"organization\",\n        id: \"organization\",\n        onChange: this.handleChangeOrga,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, getOrgas.map(function (orga, i) {\n        return __jsx(\"option\", {\n          key: i,\n          value: orga.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, orga.name);\n      }))), __jsx(NewUser.Submit, {\n        type: \"submit\",\n        value: \"Add new user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var asPath, getTeams, getOrgas;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                asPath = _ref.asPath;\n                _context.next = 3;\n                return fetch('http://localhost:8080/api/teams');\n\n              case 3:\n                getTeams = _context.sent;\n                _context.next = 6;\n                return fetch('http://localhost:8080/api/organizations');\n\n              case 6:\n                getOrgas = _context.sent;\n                _context.next = 9;\n                return getTeams.json();\n\n              case 9:\n                _context.t0 = _context.sent;\n                _context.next = 12;\n                return getOrgas.json();\n\n              case 12:\n                _context.t1 = _context.sent;\n                _context.t2 = asPath;\n                return _context.abrupt(\"return\", {\n                  getTeams: _context.t0,\n                  getOrgas: _context.t1,\n                  asPath: _context.t2\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return newUser;\n}(React.Component);\n\nexport default newUser;","map":{"version":3,"sources":["/Users/masis/Documents/dreamquark/dreamquark/front/pages/new-user.js"],"names":["React","fetch","NewUser","MainComponent","Router","newUser","teams","orga","user","name","email","teams_id","organization_id","e","persist","state","includes","target","value","teamsArray","filter","r","setState","map","Number","prevState","preventDefault","data","method","headers","body","then","res","json","response","message","push","error","console","props","getTeams","getOrgas","asPath","handleForm","handleName","handleEmail","handleChangeTeams","team","i","id","handleChangeOrga","Component"],"mappings":"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","sourcesContent":["import React         from 'react';\nimport fetch         from 'isomorphic-unfetch';\nimport NewUser       from \"../components/pages/add-user/add-user.styles\";\nimport MainComponent from \"../components/main-component/main-component\";\nimport Router        from 'next/router';\n\nclass newUser extends React.Component {\n  static async getInitialProps({ asPath }) {\n    const getTeams = await fetch('http://localhost:8080/api/teams');\n    const getOrgas = await fetch( 'http://localhost:8080/api/organizations' );\n\n    return { getTeams: await getTeams.json(), getOrgas: await getOrgas.json(), asPath }\n  }\n\n  state = {\n    teams: [],\n    orga: '',\n    user: {\n      name: '',\n      email: '',\n      teams_id: [],\n      organization_id: 1\n    }\n  };\n\n  handleChangeTeams = e => {\n    e.persist();\n\n    if (this.state.teams.includes( e.target.value )) {\n      const teamsArray = this.state.teams.filter( r => r !== e.target.value );\n      this.setState( { teams: teamsArray.map( Number ) } );\n    } else {\n      this.setState( prevState => ( { teams: [ ...prevState.teams, e.target.value ] } ), () =>\n        this.setState( prevState => ( { user: { ...prevState.user, teams_id: this.state.teams.map( Number ) } } ) )\n      );\n    }\n  };\n\n  handleChangeOrga = e => {\n    this.setState( { orga: Number( e.target.value ) }, () =>\n      this.setState( prevState => ( { user: { ...prevState.user, organization_id: Number( this.state.orga ) } } ) )\n    );\n  };\n\n  handleName = e => {\n    e.persist();\n\n    this.setState( prevState => ( {\n      user: {\n        ...prevState.user,\n        name: e.target && e.target.value\n      }\n    } ) );\n  };\n\n  handleEmail = e => {\n    e.persist();\n\n    this.setState( prevState => ( {\n      user: {\n        ...prevState.user,\n        email: e.target && e.target.value\n      }\n    } ) );\n  };\n\n  handleForm = e => {\n    e.preventDefault();\n    const data = this.state.user;\n\n    fetch( 'http://localhost:8080/api/new-user', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify( data ),\n    } ).then( res => res.json() )\n      .then( response => {response.message; Router.push('/')} )\n      .catch( error => console.error( 'Error:', error ) );\n  };\n\n  render() {\n    const { teams, user } = this.state;\n    const { getTeams, getOrgas, asPath } = this.props;\n\n    return (\n      <MainComponent asPath={asPath}>\n        <NewUser>\n\n          <NewUser.H1>Add new user</NewUser.H1>\n\n          <NewUser.Form onSubmit={ this.handleForm }>\n            <NewUser.Wrapper>\n              <NewUser.Label htmlFor=\"name\">Name</NewUser.Label>\n              <NewUser.Input\n                id=\"name\"\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Nom de l'utilisateur\"\n                value={ user.name }\n                onChange={ e => this.handleName( e ) }\n              />\n            </NewUser.Wrapper>\n\n            <NewUser.Wrapper>\n              <NewUser.Label htmlFor=\"email\">E-mail</NewUser.Label>\n              <NewUser.Input\n                id=\"email\"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Email de l'utilisateur\"\n                value={ user.email }\n                onChange={ e => this.handleEmail( e ) }\n              />\n            </NewUser.Wrapper>\n\n            <NewUser.Wrapper>\n              <NewUser.Label htmlFor=\"teams\">Choisir une ou plusieurs teams</NewUser.Label>\n\n              <NewUser.Select\n                name=\"teams\"\n                id=\"teams\"\n                multiple={ true }\n                value={ teams }\n                onChange={ this.handleChangeTeams }\n              >\n                { getTeams.map( ( team, i ) => <option key={ i } value={ team.id }>{ team.name }</option> ) }\n              </NewUser.Select>\n            </NewUser.Wrapper>\n\n            <NewUser.Wrapper>\n              <NewUser.Label htmlFor=\"organization\">Organisation</NewUser.Label>\n\n              <NewUser.Select name=\"organization\" id=\"organization\" onChange={ this.handleChangeOrga }>\n                { getOrgas.map( ( orga, i ) => <option key={ i } value={ orga.id }>{ orga.name }</option> ) }\n              </NewUser.Select>\n            </NewUser.Wrapper>\n\n            <NewUser.Submit type=\"submit\" value=\"Add new user\"/>\n\n          </NewUser.Form>\n\n        </NewUser>\n      </MainComponent>\n    )\n  }\n}\n\nexport default newUser;\n"]},"metadata":{},"sourceType":"module"}